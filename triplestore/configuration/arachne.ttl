@prefix :      <http://base/#> .
@prefix tdb2:   <http://jena.apache.org/2016/tdb#>
@prefix rdf:   <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix ja:    <http://jena.hpl.hp.com/2005/11/Assembler#> .
@prefix fuseki: <http://jena.apache.org/fuseki#> .


# Raw data endpoint - write only
:dataService a fuseki:Service ;
	fuseki:name           "raw_arachne" ;
	fuseki:endpoint  [
		fuseki:name       "update";
		fuseki:operation  fuseki:update
	];
	fuseki:endpoint  [
		fuseki:name       "data";
		fuseki:operation  fuseki:gsp-rw
	];
	fuseki:dataset        :rawDataset ;
.

# Reasoning endpoint - read only
:reasoningService a fuseki:Service ;
	fuseki:dataset                 :inferedDataset ;
	fuseki:name                    "arachne" ;
	fuseki:serviceQuery            "query", "sparql" ;
	fuseki:serviceReadGraphStore   "get" ;
.

# Inference dataset
:inferedDataset rdf:type ja:RDFDataset ;
	ja:defaultGraph :inferenceModel ;
.

# Inference model
:inferenceModel a ja:InfModel ;
	ja:baseModel :unionGraph ;
	ja:reasoner [
		ja:reasonerURL <http://jena.hpl.hp.com/2003/OWLMicroFBRuleReasoner> ;
	] ;
.

# Intermediate graph referencing the default union graph
:unionGraph rdf:type tdb2:GraphTDB ;
	tdb2:dataset :rawDataset ;
	tdb2:graphName <urn:x-arq:UnionGraph> ;
.

# The location of the TDB dataset
:rawDataset rdf:type tdb2:DatasetTDB ;
	tdb2:location "/fuseki/run/databases/arachne" ;
.